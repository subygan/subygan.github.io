<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Suriya 🧚🏻‍♂️</title>
  <meta name="description" content="🧚🏻‍♂️">
  <meta name="author" content="Suriya Ganesh">

  <meta property="og:title" content="Suriya Ganesh">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.suriyaganesh.com">
  <meta property="og:description" content="Benchmarking tools are built-in with the &ldquo;testing&rdquo; package
These can be done by writing test files of the format &ldquo;_test.go&rdquo;
Then creating functions with the prefix Benchmark, like so. func Benchmark&lt;name&gt;(b *testing.B)
a simple function that tests a simple multiplication function would be
{% highlight golang linenos %} package go_test import ( &ldquo;testing&rdquo; &ldquo;math/rand&rdquo; )
func BenchmarkMultiplication(b *testing.B){
b.ResetTimer() // Resets timer so that the values are accurate
for i := 0; i&lt;b.">
  <meta property="og:image" content="image.png">
  
  
  <link rel="stylesheet" href="https://suriya.cc/style.c0567bab15ad3417bd4691eec0b7a6b29d866c255ddd2c667e96703d35f764bb.css" integrity="sha256-wFZ7qxWtNBe9RpHuwLemsp2GbCVd3SxmfpZwPTX3ZLs=">
    <link rel="icon" type="image/x-icon" href="/assets/images/head.svg">

</head>
  <nav class="navbar">
  <a href="/">Home</a>
  <a href="/tech">Tech</a>
  <a href="/meta">Meta</a>
  <a href="/now">Now</a>
  <a href="/about">About</a>
</nav>


  <body class='typora-export'>

      

<div class='typora-export-content'>

  <div id='write'  class=''>
    <header>

      <div class="page-header-icon undefined"><span class="icon">🚅</span></div>
      <h1 class="page-title">Benchmarking</h1>
    </header>
    <div class="blender" id="blender"></div>
    <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Suriya 🧚🏻‍♂️</title>
  <meta name="description" content="🧚🏻‍♂️">
  <meta name="author" content="Suriya Ganesh">

  <meta property="og:title" content="Suriya Ganesh">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.suriyaganesh.com">
  <meta property="og:description" content="Benchmarking tools are built-in with the &ldquo;testing&rdquo; package
These can be done by writing test files of the format &ldquo;_test.go&rdquo;
Then creating functions with the prefix Benchmark, like so. func Benchmark&lt;name&gt;(b *testing.B)
a simple function that tests a simple multiplication function would be
{% highlight golang linenos %} package go_test import ( &ldquo;testing&rdquo; &ldquo;math/rand&rdquo; )
func BenchmarkMultiplication(b *testing.B){
b.ResetTimer() // Resets timer so that the values are accurate
for i := 0; i&lt;b.">
  <meta property="og:image" content="image.png">
  
  
  <link rel="stylesheet" href="https://suriya.cc/style.c0567bab15ad3417bd4691eec0b7a6b29d866c255ddd2c667e96703d35f764bb.css" integrity="sha256-wFZ7qxWtNBe9RpHuwLemsp2GbCVd3SxmfpZwPTX3ZLs=">
    <link rel="icon" type="image/x-icon" href="/assets/images/head.svg">

</head>
    <p>Benchmarking tools are built-in with the &ldquo;testing&rdquo; package</p>
<p>These can be done by writing test files of the format  &ldquo;<!-- raw HTML omitted -->_test.go&rdquo;</p>
<p>Then creating functions with the prefix Benchmark, like so. <code>func Benchmark&lt;name&gt;(b *testing.B)</code></p>
<p>a simple function that tests a simple multiplication function would be</p>
<p>{% highlight golang linenos %}
package go_test
import (
&ldquo;testing&rdquo;
&ldquo;math/rand&rdquo;
)</p>
<p>func BenchmarkMultiplication(b *testing.B){</p>
<p>b.ResetTimer() // Resets timer so that the values are accurate</p>
<p>for i := 0; i&lt;b.N; i++ {
//  ^^^ Allocated dynamically by thetesting package</p>
<p>_ := rand.Int() * rand.Int()</p>
<p>}
}</p>
<p>{% endhighlight %}</p>
<p>The <code>b.N</code> Value is allotted by the testing framework based on the projection of how long the function would run.</p>
<p>Typically it allocates b.N in increasing order. 1, 10, 100, 1000, &hellip;..</p>
<p>And then averages out the total time taken. every time figuring out the optimal value.</p>
<p>This test can be run using</p>
<p>{% highlight golang linenos %}
go test -bench=. -benchmem -cpu 1,2,4,8
{% endhighlight %}</p>
<p>Flags :</p>
<p>-bench=&quot;&quot; | Takes in a regex string to check for functions  |
-benchmem | Benchmark memory usage as well |
-cpu   |  Number of threads to be allocated |</p>
<p>The number of threads used is shown as &lt;test_name&gt;-&lt;thread_count&gt; in the result</p>
<p><img src="/assets/images/benchmark.png" alt="benchmarking"></p>
<p>There are 5 columns in the result. For some reason it&rsquo;s not annotated the arrangement is like,</p>
<p>Test_name_core_count, Number_of_iterations_run, Avg_time_per_iteration, Memory_allocation_per_iteration, number_of_allocs_per_iteration</p>

    
    
    

  </body>
</html>