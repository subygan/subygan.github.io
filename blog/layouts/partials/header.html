<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Title -->
  {{ if .IsHome }}
  <title>{{ .Site.Title }} - Technical Writing & Life</title>
  {{ else if .Params.Title }}
  <title>{{ .Params.Title }} | {{ .Site.Params.author }} - Technical Writing</title>
  {{ else }}
  <title>{{ .Title }} | {{ .Site.Params.author }}</title>
  {{ end }}

  <!-- Canonical URL -->
  <link rel="canonical" href="{{ .Permalink }}">

  <!-- Description -->
  {{ if .Params.description }}
  <meta name="description" content="{{ .Params.description }}">
  <meta property="og:description" content="{{ .Params.description }}">
  {{ else if .Summary }}
  <meta name="description" content="{{ .Summary | plainify | truncate 160 }}">
  <meta property="og:description" content="{{ .Summary | plainify | truncate 160 }}">
  {{ else }}
  <meta name="description" content="Suriya Ganesh's personal website featuring technical writing, essays, book notes, and life updates.">
  <meta property="og:description" content="Suriya Ganesh's personal website featuring technical writing, essays, book notes, and life updates.">
  {{ end }}

  <!-- Author & Keywords -->
  <meta name="author" content="Suriya Ganesh">
  {{ with .Params.tags }}
  <meta name="keywords" content="{{ delimit . ", " }}">
  {{ end }}

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  {{ if .IsHome }}
  <meta property="og:title" content="{{ .Site.Title }} - Technical Writing & Life">
  {{ else }}
  <meta property="og:title" content="{{ .Title }}">
  {{ end }}
  <meta property="og:site_name" content="{{ .Site.Title }}">
  {{ if .Params.image }}
  <meta property="og:image" content="{{ .Params.image | absURL }}">
  {{ else }}
  <meta property="og:image" content="{{ "/assets/images/s.png" | absURL }}">
  {{ end }}

  <!-- Article-specific Open Graph tags -->
  {{ if .IsPage }}
  {{ with .Date }}
  <meta property="article:published_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">
  {{ end }}
  {{ with .Lastmod }}
  <meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">
  {{ end }}
  {{ with .Params.tags }}
  {{ range . }}
  <meta property="article:tag" content="{{ . }}">
  {{ end }}
  {{ end }}
  <meta property="article:author" content="Suriya Ganesh">
  {{ with .Section }}
  <meta property="article:section" content="{{ . }}">
  {{ end }}
  {{ end }}

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@suriya">
  <meta name="twitter:creator" content="@suriya">
  {{ if .IsHome }}
  <meta name="twitter:title" content="{{ .Site.Title }} - Technical Writing & Life">
  {{ else }}
  <meta name="twitter:title" content="{{ .Title }}">
  {{ end }}
  {{ if .Params.description }}
  <meta name="twitter:description" content="{{ .Params.description }}">
  {{ else if .Summary }}
  <meta name="twitter:description" content="{{ .Summary | plainify | truncate 160 }}">
  {{ else }}
  <meta name="twitter:description" content="Suriya Ganesh's personal website featuring technical writing, essays, book notes, and life updates.">
  {{ end }}
  {{ if .Params.image }}
  <meta name="twitter:image" content="{{ .Params.image | absURL }}">
  {{ else }}
  <meta name="twitter:image" content="{{ "/assets/images/s.png" | absURL }}">
  {{ end }}

  {{ if .Params.hasEncryptedContent }}
  <meta name="hasEncryptedContent" content="true">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script type="module" src="/assets/js/decrypt.js"></script>
  {{ end }}

  {{ $sass := resources.Get "style.scss" }}
  {{ $style := $sass | css.Sass | resources.Fingerprint }}
  <link rel="stylesheet" href="{{ $style.Permalink }}" integrity="{{ $style.Data.Integrity }}" crossorigin="anonymous">
    <link rel="icon" type="image/x-icon" href="/assets/images/s.png">
  {{ range .AlternativeOutputFormats -}}
  {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
  {{ end -}}
  {{ if .Params.mathjax }}{{ partial "mathjax.html" . }}{{ end }}

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MTGWDYTZYR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-MTGWDYTZYR');
  </script>

  <!-- katex -->
   {{ if .Params.math }}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>

  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
          renderMathInElement(document.body, {
              delimiters: [
                  {left: "$$", right: "$$", display: true},
                  {left: "$", right: "$", display: false}
              ]
          });
      });
  </script>
  {{ end }}

  <!-- JSON-LD Structured Data -->
  {{ if .IsHome }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ .Site.Title }}",
    "url": "{{ .Site.BaseURL }}",
    "description": "Suriya Ganesh's personal website featuring technical writing, essays, book notes, and life updates.",
    "author": {
      "@type": "Person",
      "name": "Suriya Ganesh",
      "url": "{{ .Site.BaseURL }}"
    }
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Suriya Ganesh",
    "url": "{{ .Site.BaseURL }}",
    "sameAs": [
      "https://github.com/subygan",
      "https://twitter.com/suriya",
      "https://linkedin.com/in/suriyaganesh"
    ],
    "jobTitle": "Software Engineer",
    "description": "Technical writer and software engineer passionate about systems, ML, and building things."
  }
  </script>
  {{ else if .IsPage }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "{{ if eq .Section "tech" }}TechArticle{{ else }}Article{{ end }}",
    "headline": "{{ .Title }}",
    "description": "{{ if .Params.description }}{{ .Params.description }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}",
    "author": {
      "@type": "Person",
      "name": "Suriya Ganesh",
      "url": "{{ .Site.BaseURL }}"
    },
    "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
    "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
    "publisher": {
      "@type": "Person",
      "name": "Suriya Ganesh",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ "/assets/images/s.png" | absURL }}"
      }
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "{{ .Permalink }}"
    },
    {{ if .Params.image }}
    "image": "{{ .Params.image | absURL }}",
    {{ else }}
    "image": "{{ "/assets/images/s.png" | absURL }}",
    {{ end }}
    {{ if .Params.tags }}
    "keywords": "{{ delimit .Params.tags ", " }}",
    {{ end }}
    "articleSection": "{{ .Section }}",
    "wordCount": {{ .WordCount }},
    "inLanguage": "en-US"
  }
  </script>
  {{ end }}

  <!-- BreadcrumbList Schema -->
  {{ if not .IsHome }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "{{ .Site.BaseURL }}"
      }{{ if .Section }},
      {
        "@type": "ListItem",
        "position": 2,
        "name": "{{ .Section | humanize | title }}",
        "item": "{{ .Site.BaseURL }}{{ .Section }}"
      }{{ end }}{{ if .IsPage }},
      {
        "@type": "ListItem",
        "position": {{ if .Section }}3{{ else }}2{{ end }},
        "name": "{{ .Title }}",
        "item": "{{ .Permalink }}"
      }{{ end }}
    ]
  }
  </script>
  {{ end }}

</head>